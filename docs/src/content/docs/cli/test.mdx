---
title: Qang Test
description: Running tests in QangLang
---

The `qang test` command discovers and runs test functions in QangLang projects.

## Usage

```bash
qang test <path> [options]
```

### Arguments

- `<path>` - Path to a test file or directory containing tests (required)
  - If a directory is provided, all `.ql` files will be discovered and run recursively

### Options

- `--debug` / `-d` - Enable debug output during test execution
- `--heap` / `-m` - Dump compiled bytecode and heap contents before test execution
- `--eformat` / `-e` - Error message format (default: `verbose`)
  - `minimal` - Shows minimal error information
  - `compact` - Shows compact error messages
  - `verbose` - Shows detailed error messages with full context

## Writing Tests

QangLang tests are regular `.ql` files that contain:

1. **Test Description** (optional): A top-level variable named `test_description`
2. **Test Functions**: Functions with names starting with `test_`

### Example Test File

```ql
var test_description = "Testing math expressions and their precedence.";

fn test_addition() {
  assert_eq(1 + 1, 2, "Expected 1 + 1 to equal 2.");
  assert_eq(1 + -1, 0, "Expected 1 + -1 to equal 0.");
}

fn test_subtraction() {
  assert_eq(5 - 3, 2, "Expected 5 - 3 to equal 2.");
}
```

### Assertion Functions

QangLang provides built-in assertion functions for testing:

- `assert(condition, message)` - Assert that a condition is truthy
- `assert_eq(actual, expected, message)` - Assert that two values are equal
- `assert_not_nil(value)` - Assert that a value is not nil
- `assert_throws(fn)` - Assert that a function throws an error when called

### Test Discovery

The test runner automatically:

- Finds all functions whose names start with `test_`
- Executes each test function independently
- Reports results for each test

## Examples

### Run a Single Test File

```bash
qang test tests/test_math.ql
```

### Run All Tests in a Directory

```bash
qang test tests/
```

### Run Tests with Debug Output

```bash
qang test tests/ --debug
```

### Show Bytecode During Tests

Useful for debugging test failures:

```bash
qang test tests/test_failing.ql --heap
```

### Use Compact Error Format

```bash
qang test tests/ --eformat compact
```

## Test Output

The test runner provides:

- Individual test results (pass/fail) for each test function
- Error messages for failed assertions
- Summary statistics (total tests, passed, failed)
- The `test_description` message if defined

## Exit Codes

- `0` - All tests passed successfully
- `1` - One or more tests failed or encountered errors

## Use Cases

### Running Tests During Development

Quickly verify your changes:

```bash
qang test tests/
```

### CI/CD Integration

Run all tests in your continuous integration pipeline:

```bash
qang test tests/ --eformat compact
```

### Debugging Failing Tests

Get detailed information about test failures:

```bash
qang test tests/test_failing.ql --debug --heap --eformat verbose
```
