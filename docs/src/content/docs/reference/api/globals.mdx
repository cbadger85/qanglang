---
title: Globals Reference
description: A reference for the global declarations available in QangLang.
---

import { Badge } from "@astrojs/starlight/components";

## Constants

### `ARRAY`

a constant containing the string `"array"`, used with the [`typeof`](#typeof) function can return the runtime type.

```ql
assert([] is ARRAY);
assert_eq(typeof([]), ARRAY);
```

### `BOOLEAN`

a constant containing the string `"boolean"`, used with the [`typeof`](#typeof) function can return the runtime type.

```ql
assert(true is BOOLEAN);
assert_eq(typeof(false), BOOLEAN);
```

### `CLASS`

a constant containing the string `"class"`, used with the `is` operator or [`typeof`](#typeof) function can return the runtime type.

```ql
class MyClass { }
assert(MyClass is CLASS);
assert_eq(typeof(MyClass), CLASS);
```

### `FUNCTION`

a constant containing the string `"function"`, used with the `is` operator or used with the [`typeof`](#typeof) function can return the runtime type.

```ql
assert(() -> nil is FUNCTION);
assert_eq(typeof(() -> nil), FUNCTION);
```

### `MODULE`

a constant containing the string `"module"`, used with the `is` operator or used with the [`typeof`](#typeof) function can return the runtime type.

```ql
mod utils = import("./utils.ql");
assert(utils is MODULE);
assert_eq(typeof(utils), MODULE);
```

### `NIL`

a constant containing the string `"nil"`, used with the `is` operator or used with the [`typeof`](#typeof) function can return the runtime type.

```ql
assert(nil is NIL);
assert_eq(typeof(nil), NIL);
```

### `NUMBER`

a constant containing the string `"number"`, used with the `is` operator or used with the [`typeof`](#typeof) function can return the runtime type.

```ql
assert(0 is NUMBER);
assert_eq(typeof(1), NUMBER);
```

### `OBJECT`

a constant containing the string `"object"`, used with the `is` operator or used with the [`typeof`](#typeof) function can return the runtime type.

```ql
assert({{ }} is OBJECT);
class MyClass { }
assert(MyClass() is OBJECT);
assert_eq(typeof(MyClass()), OBJECT);
```

### `STRING`

a constant containing the string `"string"`, used with the `is` operator or used with the [`typeof`](#typeof) function can return the runtime type.

```ql
assert("" is STRING);
assert_eq(typeof(""), STRING);
```

## Classes

### `StringBuilder`

Creates a builder that can efficiently construct strings without interning intermediate values.

#### Constructor

```ql
var hello_world = StringBuilder("Hello")
  .append(" ")
  .append("World")
  .append("!")
  .to_string();
println(hello_world); // "Hello World!"
```

##### Parameters

initial_value: `String` <Badge text="optional" /> - An optional initial value for the string builder.

#### Methods

##### `append`

Appends a string to the end of the builder.

###### Parameters

value: `String` - The string to append.

###### Returns

value: `StringBuilder` - The instance of the string builder.

##### `combine`

Combines two string builders into a new string builder.

###### Parameters

builder: `StringBuilder` - The string to combine.

###### Returns

value: `StringBuilder` - A new instance of `StringBuilder` with strings from both builders.

##### `prepend`

Prepends a string to the start of the builder.

###### Parameters

value: `String` - The string to prepend.

###### Returns

value: `StringBuilder` - The instance of the string builder.

##### `to_string`

Builds the string from the components provided to the builder.

###### Parameters

None

###### Returns

value: `String` - The built string.

## Functions

### `array_of`

Creates an array of the provided length and initializing each element to its index.

```ql
var arr1 = array_of(3); // [0, 1, 2]
var arr2 = array_of(3, (i) -> i + 1); // [1, 2, 3]
```

#### Parameters

length: `Number` - The length of the array.

initializer: `(Number) -> dyn!` <Badge text="optional" /> - An optional function that takes the index as a parameter and sets the element in the array to its return.

#### Returns

`[dyn!]` - An array of the specified length where each element is either its index or the result of the initializer function.

### `assert`

Asserts the value is truthy. Ends the program if not.

```ql
assert(true); // Assertion is true, so nothing happens.
assert(false, "This is going to error."); // Assertion is false, the program exits, giving an error using the message if provided.

```

#### Parameters

value: `dyn!` - Any value. Falsy values (0 and `nil`) cause the program to exit.

message: `String?` <Badge text="optional" /> - An optional message if the assertion fails.

#### Returns

`nil`

#### Throws

Throws an error if the value is `false` or `nil`.

### `assert_eq`

Asserts two values are equal. Ends the program if not.

````ql
assert_eq(1, 1); // Assertion is true, so nothing happens.
assert_eq(1, 0, "This is going to error."); // These values are not equal, so the assertion fails and the program exits.

#### Parameters

value1: `dyn!` - The first value to check for equality.

value2: `dyn!` - The second value to check for equality.

message: `String?` <Badge text="optional" /> - An optional message if the assertion fails.

#### Returns

`nil`

#### Throws

Throws an error if the values are not equal.

### `assert_not_nil`

Asserts if that a value is not `nil`. Useful as a typeguard.

```ql
var value1 = true;
assert_not_nil(value1); // Nothing happens because value1 is not nil
var value2 = nil;
assert_not_nil(value2); // Assertion is false so this throws, exiting the program.
````

#### Parameters

function: `dyn!` - The value to check for `nil`.

message: `String?` <Badge text="optional" /> - An optional message if the assertion fails.

#### Returns

`nil`

#### Throws

Throws an error if the provided function does not throw an error.

### `assert_throws`

Asserts a function will throw an error. If no error is thrown, the program exits with an error.

```ql
assert_throws(() -> 1 / 0); // Nothing happens as 1 / 0 throws an error.
assert_throws(() -> println("Hello World", "This is going to error.")); // This callback will not throw, so the program will exit.

```

#### Parameters

function: `() -> dyn!` - The function to call to check for an error.

message: `String?` <Badge text="optional" /> - An optional message if the assertion fails.

#### Returns

`nil`

#### Throws

Throws an error if the provided function does not throw an error.

### `env_cwd`

Returns the current working directory as a string.

```ql
var cwd = env_cwd();

```

#### Parameters

None

#### Returns

`String` - The current working directory as a string.

### `identity`

An identity function.

```ql
var value = identity(1); // 1

```

#### Parameters

value: `dyn!` - Any value.

#### Returns

`dyn!` - The value provided in the argument.

### `object_assign`

Used to set the fields of one class or instance to the fields of another, useful for creating a shallow copy.

```ql
var obj = {{
  a = 0,
  b = 1,
}};

var copy = object_assign({{ }}, obj);
assert_eq(copy.a, 0);
assert_eq(copy.b, 1);
```

#### Parameters

destination_object: `Object` - The object or class instance that the fields will be copied into.

source_object: `Object` - The object or clas instance.

value: `dyn!` - The value to be set.

#### Returns

`Object` - The destination object or class instance with the fields copied into it.

### `object_get`

Used to get the field of an object literal or class instance dynamically. Class methods can not be accessed using this function, though lambdas assigned to fields can be.

```ql
var obj = {{
  field = "value",
}};

assert_eq(object_get(obj, "field"), "value");
```

#### Parameters

object: `Object` - The object or class instance of the field to be accessed.

key: `String` - The key of the field to be accessed.

#### Returns

`dyn!` - The value of the field, or `nil` if the field does not exist.

### `object_set`

Used to set the field of an object literal or class instance dynamically.

```ql
var obj = {{ }};

object_set(obj, "field", "value")
assert_eq(obj.field, "value");
```

#### Parameters

object: `Object` - The object or class instance of the field to be added or modified.

key: `String` - The key of the field to be added or modified.

value: `dyn!` - The value to be set.

#### Returns

`nil`

### `object_to_entries`

Used to get the keys and values as an array of entries.

```ql
var obj = {{
  a = 0,
  b = 1,
}};

object_to_entries(obj).iter().for_each((entry) -> {
  println("key: " + entry.key + ", value: " + to_string(entry.value));
});
// "key: a, value: 0"
// "key: b, value: 1"
```

#### Parameters

None

#### Returns

`[Entry]` - Returns an array of where each element is an instance of [`Entry`](/reference/api/entry/)

### `print`

Prints a value to the console. All values are implicitly converted to strings.

```ql
print("Hello World!"); // prints Hello World!

```

#### Parameters

value: `dyn!` - Any value.

#### Returns

`nil`

### `println`

Prints a value to the console followed by a newline. All values are implicitly converted to strings.

```ql
println("Hello World!"); // prints Hello World!\n

```

#### Parameters

value: `dyn!` - Any value.

#### Returns

`nil`

### `to_string`

Returns the value as a string.

```ql
var one_string = to_string(1); // "1"

```

#### Parameters

value: `dyn!` - Any value.

#### Returns

`String` - The value as a string.

### `typeof`

Returns the type as a string.

```ql
println(typeof("Hello World!")); // string

```

#### Parameters

value: `dyn!` - Any value.

#### Returns

`String` - a value of `"nil"`, `"boolean"`, `"number"`, `"string"`, `"function"`, `"class"`, `"object"`, `"array"` or `"module"` depending on the type of the value.

### `system_time`

Returns the time in milliseconds since the start of the Unix epoch.

```ql
var start = system_time();
complex_operation();
var end = system_time();
var duration = start - end; // The time in milliseconds between start and end.

```

#### Parameters

None

#### Returns

`Number` - The time in milliseconds since the start of the Unix epoch.
